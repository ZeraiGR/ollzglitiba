"use strict";

window.addEventListener("DOMContentLoaded", function () {
  function e(e) {
    var t = document.querySelector(".header__burger"),
        o = document.querySelector(".header__top"),
        n = e.target;
    null != n.closest(".header__top") || n.classList.contains("header__burger") || (t.classList.remove("active"), o.classList.remove("active"));
  }

  !function () {
    "use strict";

    var e = document.querySelectorAll(".popup-link"),
        t = document.querySelector("body"),
        o = document.querySelectorAll(".lock-padding");
    var n = !0;

    if (e.length > 0) {
      var _loop = function _loop(_t) {
        var o = e[_t];
        o.addEventListener("click", function (e) {
          var t = o.getAttribute("href").replace("#", "");
          s(document.getElementById(t)), e.preventDefault();
        });
      };

      for (var _t = 0; _t < e.length; _t++) {
        _loop(_t);
      }
    }

    var c = document.querySelectorAll(".close-popup");

    if (c.length > 0) {
      var _loop2 = function _loop2(_e) {
        var t = c[_e];
        t.addEventListener("click", function (e) {
          l(t.closest(".popup")), e.preventDefault();
        });
      };

      for (var _e = 0; _e < c.length; _e++) {
        _loop2(_e);
      }
    }

    function s(e) {
      if (e && n) {
        var _c = document.querySelector(".popup.open");

        _c ? l(_c, !1) : function () {
          var e = window.innerWidth - t.offsetWidth + "px";
          if (o.length > 0) for (var _t2 = 0; _t2 < o.length; _t2++) {
            o[_t2].style.paddingRight = e;
          }
          t.style.paddingRight = e, t.classList.add("lock"), n = !1, setTimeout(function () {
            n = !0;
          }, 800);
        }(), e.classList.add("open"), e.addEventListener("click", function (e) {
          e.target.closest(".popup__content") || l(e.target.closest(".popup"));
        });
      }
    }

    function l(e) {
      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
      n && (e.classList.remove("open"), c && (setTimeout(function () {
        if (o.length > 0) for (var _e2 = 0; _e2 < o.length; _e2++) {
          o[_e2].style.paddingRight = "0px";
        }
        t.style.paddingRight = "0px", t.classList.remove("lock");
      }, 800), n = !1, setTimeout(function () {
        n = !0;
      }, 800)));
    }

    document.addEventListener("keydown", function (e) {
      if ("Escape" === e.key) {
        l(document.querySelector(".popup.open"));
      }
    }), Element.prototype.closest || (Element.prototype.closest = function (e) {
      for (var t = this; t;) {
        if (t.matches(e)) return t;
        t = t.parentElement;
      }

      return null;
    }), Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector);
  }(), function () {
    var e = document.querySelectorAll(".sidebar-single__show");
    document.querySelectorAll(".sidebar-single__list"), e.forEach(function (e) {
      e.addEventListener("click", function (e) {
        var t = e.target;
        t.closest(".sidebar-single__show") && (t.closest(".sidebar-single__show").nextElementSibling.classList.toggle("show"), t.closest(".sidebar-single__show").querySelector(".catalog__search-icon").classList.toggle("show"));
      });
    });
  }(), function () {
    var t = document.querySelector(".header__burger"),
        o = document.querySelector(".header__top");
    t.addEventListener("click", function () {
      this.classList.toggle("active"), o.classList.toggle("active"), this.classList.contains("active") ? window.addEventListener("click", e) : window.removeEventListener("click", e);
    });
  }(), function () {
    var e = document.querySelector(".catalog__mobile-search"),
        t = document.querySelector(".sidebar"),
        o = document.querySelector(".sidebar__close");
    e && e.addEventListener("click", function () {
      e.classList.add("open"), t.classList.add("open");
    }), o && o.addEventListener("click", function () {
      e.classList.remove("open"), t.classList.remove("open");
    });
  }();
});